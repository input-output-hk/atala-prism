@startuml
title Bitcoin - Verify credential

actor Student
participant IOHK
actor Employer
participant GEUD

Employer -> IOHK : Ask for a connection code
IOHK -> IOHK : Verify employer identity
IOHK -> IOHK : Verify employer billing plan\n the employer may need to pay\n or the student may pay instead \n or it may be free
IOHK -> IOHK : Generate unique connection code
IOHK -> Employer : Connection code generated

Employer -> Student : Share the connection code\n through the secure channel
Student -> IOHK : Get Employer from connection code
IOHK -> Student : Employer details retrieved
Student -> Student : Validate whether a payment is required
Student -> Student : Add employer connection\n attaching an optional proof of payment\n which depends on the previous details

Student -> Student : Generate DID
Student -> IOHK : Register connection (employer, DID)
IOHK -> Student : Connection registered
IOHK -> Employer : Student connected

Student -> IOHK : Share credential to the Employer
IOHK -> Employer : Share student credential
Employer -> IOHK : Ack
IOHK -> Student : Credential shared

Employer -> GEUD : Find university DID document
GEUD -> Employer : University DID
Employer -> Employer : Verify if the credential \nwas issued by the university
Employer -> GEUD : Find university revocation registry
GEUD -> Employer : Revocation registry
Employer -> Employer : Verify if credential is revoked
Employer -> Employer : Verification verdict
@enduml
