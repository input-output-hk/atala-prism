package db.migration

import java.util.{Base64, UUID}
import org.flywaydb.core.api.migration.{BaseJavaMigration, Context}

import scala.util.Using

class V11__IssuerIcons extends BaseJavaMigration {

  val govPng = decode(
    "iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJwSURBVHgBzZg/TFNRFMa/e9turXFUpy4og0ZMNDERDXRSBl8XnFhkVnEyhphIY1yc0MUNFydZ7OIoJDCQQNIODPxL6ASMhLI15XLOu3mFNoVy36H0/pKXvvfubfL13Hu+c3sUWjB3B4eAozw0AhiVxVWgUIahq1YvqLWlSvNQJCw7dB3Xap9p4nv0lmkkUgVVnt/nB9UQl67N0dMAfIAjqlPDLFKHLzhyvohjDGmpkyZCmf7HWaQS2/ARo4Y1iZuCtxzlNS3tffiKUoEO19tfshqek4SUTAYYGwWCF8Ctm/bdzi6wXAJ+/rL3ApS598RAwiyJuNPXfozFjb4GqoeIi2yJc0/PFsdwRMdeQYJM4MMHnefwjxAgExjtOemcc+h+FmfSkCATeJEMXd+EBJnA/wud56z1UuBKyV5nsbNHXjgDCfI9+OmrFdIKe9/Ex/ZjDsiNOuIlVZL8CHBwaPfd7z8ig46IL5BLXPCcjPo2WckN4NuPk4SIyh+bOL9b7rAVLlUg+9qXSeBRG5OuVm3U2nkfZ/zEpHNWuwnkyMzOxDdfFj/+1kmkW5LkBmWVgU37wzunr7gJDEYgpr/PabqbQE4GKRxFh1VwFCgr/A0c6nNvjvxdEyisCg0cDNxN4PgboPgPsWHDdrSZeJWEk4VP07ln1DZJ2+fW/cnGHJa9LTrRbNjPGNXk8mpxl/D+fzEJNBX4CjU1ufVRhK8oFgj9F76SqBe0Wl2cpz7cd/iGUdOqvFSxSZJMToVtV18wKJGmAt+GAsOGNfWEPYik4cghmco1NdGbZgxQS7hOXVdDjU1Z39rBX8lJwmTVxXDLneIYEyPDYeBEt08AAAAASUVORK5CYII="
  )
  val employPng = decode(
    "iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAK6SURBVHgBzZixbxMxFMY/m2SpCmXoUpCqkxjIQEWFQCwMpH8AoQMbGwtsbCxItGKCKUxMbOyh/AGEgQ0EkcpQBkRUqXTpAELqUrXmfWe5ukTpnWOnrX+SlUvOyX357vn53VMYonPF3D4A7mqNFgwynAQKPblWD3tYXd5Q/cFTTlhmzuMcnsnExzhd2jgjQnvqD9+oQ3HT6Mq7RaQAHdVoUqTOP6BzqYgjRrTsiyZBdRomQx2/kCIGTW3qWEGi5ItVKVxFomiFls7vd7pkNUyAqQvAtefATAOonwX+/gB+vgU21xBNtMD5O8DCEyvMMXPZCqbwjdeIQiMCChgWV6TxCLj1BlFECaSAo8Q5Zm9UzykjSiBjzodTE+h74b1/CCZK4O7v6jkx4kiwwNnrdlRBl+dbCCZYIHOdL7tbCCZYIG/dzpfqeQyD7S6CiYrBr0+r56y/QBTRi6TMxVj3SJRAQhePWqmx7pFogaR7bzDlUDCF+8RoFaqzYAwCYIrhVkc+PbCvLBKIW+EsGLjVsWAIrWzGqmZcTptr2gsXP+dwe/P6SyuSc1wpxnPbH+wYx1lvgXNLwM326HMUvfPZziFOPMU5eHzpvh101LcM845BdztHQUfpGJ1h/NGlst2DIn33cW+BLr5G4Uoq7hhcLBzFEBiGc4vuljGRkp/QMRdzPC77Q2TiDlZVLgwB50rjIaJ/z+EtkIugjKIjUxfL57ow8GGsPMjcx9sXWj7xTzIfbr73/05QoqZbjDGmlfxRc9q6VnQxd2nLrm4OruyQ4jV4JzkpGIN9pIo0NfWBwQSe/48J6RNKpxfvkCrSadXL39VHcfEVEkNWRls6rP08D+qa9AjZdk0Fg2+qhlUe5gLzhrX0hBNw0oiGtmzASwNN9CKdRZOZfawoI43NuL71OOmrz8Uqbq0x5Ion/gMeNdpijlQr4wAAAABJRU5ErkJggg=="
  )
  val cupPng = decode(
    "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"
  )
  val group363Png = decode(
    "iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALMSURBVHgB3Zk/TFNRFMa/+ywkKhAnSZgqix1s6KCJIxCHxqWdxcnEwU0nF4g0OhgGqTGRRKMTdXHhbU1UygaJJr6oQ11KJyJMJhQYDL3er4+GtvjIfa+XesMvaXpv37+v59xzzu2pQAfpK3JcAFk4yAiJOHqBgAcJr/4HuWJZVNsPHTAelxfOD+GRlLiP/4gE8ntnkFvxxG/ORVPcuQGU1CwFG1AW3XUwQZEO57ScNeKIROrsvtKkEOmEjDt9WIeF1CUmHNGHWVgKg9URAmOwFKUt49DfsJe4A0MMjwBvi8BMXgXdIIxhROD1SeDFe19kc3xxBEYQN5MqNUeAVhq9DEzdA5LX/n3OR9d/ff+CyGgLzE4BlxL+eDThi9NlZxuolIHNDX++WgLWlvWujUGTuw8RGVqbVk4ezOl+XYHGguSk0LbgcdCFz6b9d8JgefAERjAisKaErZUO51uGIpicXhfTna/m/HFtu/0Y5/Mz/pgBwVQUFW2BFNRaISiCOS7o3Oax4S4Faru400rdsLWhf662wPUyjLEZQqC2i3913JSue/rGH9Olj1t+yXApcNPQGA8dvVclxJfVFsjMn73d/lmzBndaZGAwuD6Tyk9oo+1i3nTHwDr89jncGgwVxR/co1YkdDddWmupJEF8chGKUNstPph7vagbUi6FO+lQl4SrJHxA4SUiMz+N0IQudW4hOEEfR2Eh2sY1Ui1mGVta1D+f4t4tIBKRa/HrOT9wGDRBa5JLgm7tyZY/CAbOLVVrb2QOP6NwWthd7D41dS2wCYUmr6LRDlhdNpMziTGBJwWDpApLUabz2PqIkDR6g+rNeE5drWdYSl11Wp3iD7GirPgclqHcmy96otpI1P0x1SNkI9sWJL7uxZDjsCFwSfWC+1VP2AJLSlpuN4bJtiZ6K+mUjIt9zKq/IMa67Ftrpy/JTKKCVb27jSXXwl/slelmlGFsPwAAAABJRU5ErkJggg=="
  )

  override def migrate(context: Context): Unit = {
    def setLogo(id: UUID, logo: Array[Byte]) = {
      Using(
        context.getConnection.prepareStatement(
          "UPDATE participants SET logo = ? WHERE id = ?"
        )
      ) { statement =>
        statement.setBytes(1, logo)
        statement.setObject(2, id)
        statement.execute()
      }
    }

    setLogo(uuid("091d41cc-e8fc-4c44-9bd3-c938dcf76dff"), govPng)
    setLogo(uuid("6c170e91-92b0-4265-909d-951c11f30caa"), cupPng)
    setLogo(uuid("12c28b34-95be-4801-951e-c775f89d05ba"), employPng)
    setLogo(uuid("a1cb7eee-65c1-4d7f-9417-db8a37a6212a"), group363Png)
    ()
  }

  private def uuid(u: String): UUID = UUID.fromString(u)

  private def decode(b: String): Array[Byte] = Base64.getDecoder.decode(b)
}
