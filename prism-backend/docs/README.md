# Documents

Here you can find the project documentation.

- [PRISM protocol (short version)](./article.pdf)
  <br/>Compact description of the protocol behind PRISM.
  <br/>Note **this document is public.**
- [PRISM protocol](./protocol.pdf) `.PDF` version
  <br/>[PRISM protocol](./protocol.docx) `.DOCX` version - Microsoft Word documents)
  <br/>Description of the PRISM's protocol
- [SDK](./sdk/README.md)
  <br/>This small doc aims to specify the approach we plan to take to build a decent one.

- Diagrams
  - [List of Diagrams](./new-diagrams/README.md)
  - [Miscallaneous diagrams](./misc/README.md)
  - [Payment flow](./payments/README.md)

- PRISM Node:
  - [Operations Lifecycle](./node/operaions-lifecycle-in-node-service.md)
  - [The life cycle of an AtalaOperation](./node/operations-ordering-submission.md)
  - [Rate limiting requests](./node/rate-limiting.md)
  - [Subscriptions and their use cases](./node/SubscriptionMechanism.md)
- PRISM components:
  - [Cardano - Integration](./cardano/README.md)
  - [Connector - End to End Encryption](./connector/e2e-encryption.md)
  - [PRISM gRPC Streaming](./grpc/streaming.md)
  - [Encrypted Data Vault](./data-vault/README.md)
  - [Wallet Backend Motivation](./wallet-backend/motivation.md)
- Monitoring:
  - [Logging](./monitoring/logging/README.md)
  - [Metrics](./monitoring/metrics/README.md)
- Offline Mode:
  - [PRISM while Cardano is offline](./moe/full-offline-mode.md)
  - [PRISM Offline Mode](./moe/offline-mode.md)
- [Atala PRISM on-premise deployments](./on-premise-deployments/README.md)
- [Tasks and Leases](./mirror/tasks-and-leases.md)
- [Bitcoin - Atala Prism](./bitcoin/README.md)

- Endorsements & Proposals:
  - [Endorsements](./endorsements/endorsements.md)
  - [GEUD Proposal - Connector](./connector/README.md)
  - [Proposal: MoE controls all master keys](./endorsements/MoE-controls-master-keys-proposal.md)
  - [GEUD Proposal - Indy](./indy/README.md)

- [Problems with signing structured data](./signing.md)

## Compiling diagrams

There are some requirements to compile the diagrams:

- Install graphviz, on ubuntu-based systems should be as simple as running `apt-get install graphviz`, verify the installation by running `dot -v`.
- Download the plantuml jar file from the [official site](http://plantuml.com/starting).

Then, open a terminal on the directory with the `*.puml` files, and run the following command after replacing the location for your `plantuml.jar` file:

- `for file in *.puml; do java -jar ~/Downloads/plantuml.jar "$file"; done`

It is useful to see the diagram changes as you edit the sources, there is a [plantuml plugin for IntelliJ](https://plugins.jetbrains.com/plugin/7017-plantuml-integration/) which can help.

## Add new Documents

When creating a new document, choose the best tool for the job.
We recommend using:

- Markdown format for quick documentation;
- Latex format for a more formal document;
- [Mermaid format](https://mermaid-js.github.io/mermaid/#/) (inside a Markdown file) for flowcharts or Sequence diagrams. (Since is already supported by github)

After creating the document upload this index file.
<br/>Also, you will probably need to update the Github Action [`Generate_Documentation`](/.github/workflows/gh-pages-documentation-website.yml) to build your new document.

## Update Documents

Most documents shound be updated/refreshed automatically when chenged by the Github Action [`Generate_Documentation`](/.github/workflows/gh-pages-documentation-website).

For the components that have diagrams generated by plantuml be sure to compile them each time they are updated.
We intend to automate this in the future.
