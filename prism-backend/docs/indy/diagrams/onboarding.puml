@startuml
skinparam backgroundColor #EEEBDC

title Indy - Onboarding student

actor University
actor IOHK
actor Student

University -> IOHK : Ask for a connection code
IOHK -> IOHK : Verify university identity
IOHK -> IOHK : Verify university billing plan\n the university may need to pay\n or the student may pay instead \n or it may be free
IOHK -> IOHK : Generate unique connection code
IOHK -> University : Connection code generated

University -> Student : Share the connection code\n through the secure channel
Student -> IOHK : Get university from connection code
IOHK -> Student : University details retrieved
Student -> Student : Validate whether a payment is required
Student -> Student : Add university connection\n attaching an optional proof of payment\n which depends on the previous details

Student -> Student : Generate DID
Student -> IOHK : Register connection (university, DID)
IOHK -> IOHK : Generate DID for accepting\n credential offers for the student
IOHK -> Student : Ask for privileges to\n accept credential offers
Student -> IOHK : Privileges granted
IOHK -> Student : Connection registered
IOHK -> University : Student connected
@enduml
